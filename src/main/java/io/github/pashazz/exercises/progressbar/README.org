Есть таска X, которая хочет репортить некоторому Монитору о том, что прогресс составляет сколько-то процентов. как это сделать?

** Рабочий тред

имеет в себе некоторый объект, назовем его bar. вызывает bar.incrementProgress например

** Прогресс бар

Перерисовывает себя, когда ему приходит incrementProgress. остальное время спит.

** Алгоритм

| Рабочий поток           | semaphore state | Бар                 |
|-------------------------+-----------------+---------------------|
|                         |               0 | semaphore.acquire() |
| doWork()                |               0 | [LOCKED]            |
| updateProgress():       |                 | [LOCKED]            |
| ->  semaphore.release() |               1 | progress++;         |
|                         |               0 | semaphore.acquire() |
|-------------------------+-----------------+---------------------|
| doWork()                |               0 | [LOCKED]            |
